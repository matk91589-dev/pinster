<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Pingster</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    
    <!-- ===== ЗАЩИТА ОТ FOUC ===== -->
    <style>
        /* Скрываем всё до загрузки стилей */
        .screen {
            display: none !important;
        }
        
        /* Показываем только стартовый экран */
        #startScreen {
            display: flex !important;
        }
        
        /* Скрываем хедер на стартовом */
        .header {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="phone-frame">
        <div class="content">
            <!-- Хедер -->
            <div class="header">
                <div class="logo" onclick="handleLogoClick()">
                    <span class="ping">Ping</span><span class="ster">ster</span>
                </div>
                <div id="settingsIcon" class="icon-settings" onclick="showSettingsScreen()">
                    <svg viewBox="0 0 24 24">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.6 1.6 0 0 0 .3 1.8l.1.1-2 3.4-.1-.1a1.6 1.6 0 0 0-1.8-.3 1.6 1.6 0 0 0-1 1.5V22H9v-.6a1.6 1.6 0 0 0-1-1.5 1.6 1.6 0 0 0-1.8.3l-.1.1-2-3.4.1-.1a1.6 1.6 0 0 0 .3-1.8 1.6 1.6 0 0 0-1.5-1H2V9h.6a1.6 1.6 0 0 0 1.5-1 1.6 1.6 0 0 0-.3-1.8l-.1-.1 2-3.4.1.1a1.6 1.6 0 0 0 1.8.3H8a1.6 1.6 0 0 0 1-1.5V2h6v.6a1.6 1.6 0 0 0 1 1.5h.1a1.6 1.6 0 0 0 1.8-.3l.1-.1 2 3.4-.1.1a1.6 1.6 0 0 0-.3 1.8V9H22v4h-.6a1.6 1.6 0 0 0-1 1.5z"/>
                    </svg>
                </div>
            </div>

            <!-- СТАРТОВЫЙ ЭКРАН -->
            <div id="startScreen" class="screen start-screen">
                <div class="start-logo">
                    <span class="ping">Ping</span><span class="ster">ster</span>
                </div>
                <div class="start-avatar-square" id="startAvatar">
                    <img src=".....jpg" alt="avatar">
                </div>
                <div class="start-description-box">
                    <div class="start-description">
                        Pingster — площадка, где вы можете найти тиммейта за 30 секунд.<br>
                        Быстро, просто, без смс.<br>
                        Здесь можно находить друзей и просто тиммейта на одну катку.<br>
                        Фаниться или апать звания.
                    </div>
                </div>
                <button class="primary-btn" id="startButton" onclick="window.startApp ? window.startApp() : alert('Функция не загружена')">Начать</button>
                <div class="online-counter">
                    более 1000+ игроков онлайн
                </div>
            </div>

            <!-- ГЛАВНЫЙ ЭКРАН -->
            <div id="mainScreen" class="screen screen-main main-screen">
                <div class="section-title">Выбор режима</div>
                <div class="section-subtitle">Подберите подходящий</div>
                <div class="mode-container">
                    <button class="mode-btn faceit" onclick="showFaceitScreen()">FACEIT</button>
                    <button class="mode-btn premier" onclick="showPremierScreen()">PREMIER</button>
                    <button class="mode-btn prime" onclick="showPrimeScreen()">MM PRIME</button>
                    <button class="mode-btn public" onclick="showPublicScreen()">MM PUBLIC</button>
                </div>
                <div class="bottom-nav">
                    <div class="nav-item active" onclick="showMainScreen()">
                        <span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M3 10L12 3l9 7v9a2 2 0 0 1-2 2h-4v-6H9v6H5a2 2 0 0 1-2-2z"/></svg></span>
                        <span class="nav-label">Главная</span>
                    </div>
                    <div class="nav-item" onclick="showShopScreen()">
                        <span class="nav-icon"><svg viewBox="0 0 24 24"><path d="M6 6h15l-1.5 9h-12z"/><circle cx="9" cy="21" r="1"/><circle cx="18" cy="21" r="1"/></svg></span>
                        <span class="nav-label">Магазин</span>
                    </div>
                    <div class="nav-item" onclick="showProfileScreen()">
                        <span class="nav-icon"><svg viewBox="0 0 24 24"><circle cx="12" cy="8" r="4"/><path d="M4 21c2-4 14-4 16 0"/></svg></span>
                        <span class="nav-label">Профиль</span>
                    </div>
                </div>
            </div>

            <!-- остальные экраны (без изменений) -->
            <!-- ... (весь остальной HTML из твоего файла) ... -->

        </div>
        <div class="home-bar"></div>
    </div>

    <!-- Подключаем скрипты -->
    <script src="app.js"></script>
    <script src="api.js"></script>
    <script src="profile.js"></script>
    <script src="shop.js"></script>
    <script src="friends.js"></script>
    <script src="search.js"></script>
    <script src="ui.js"></script>
    
    <!-- ПРОСТОЕ ИСПРАВЛЕНИЕ КНОПКИ -->
    <script>
        // Делаем функцию startApp глобальной
        window.startApp = function() {
            console.log('startApp вызвана');
            
            // Прячем все экраны
            document.querySelectorAll('.screen').forEach(screen => {
                screen.style.display = 'none';
            });
            
            // Показываем главный экран
            const mainScreen = document.getElementById('mainScreen');
            if (mainScreen) {
                mainScreen.style.display = 'flex';
            }
            
            // Убираем активность с шестеренки
            const settingsIcon = document.getElementById('settingsIcon');
            if (settingsIcon) {
                settingsIcon.classList.remove('active');
            }
        };

        // Показываем хедер
        setTimeout(function() {
            const header = document.querySelector('.header');
            if (header) {
                header.style.opacity = '1';
                header.style.pointerEvents = 'auto';
            }
        }, 100);
    </script>
</body>
</html>
